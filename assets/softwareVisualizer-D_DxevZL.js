import{m as L}from"./index-CKQF8gEq.js";import{S as R,C as T,P as y,W,O as j,A as F,D as G,k as O,a as U,M as N,L as V,h as $,i as q,c as H,f as X,g as Y,R as J,j as K}from"./OrbitControls-hv_4xcvx.js";function ee(s){var D,E;const i=document.createElement("div");i.className="w-full h-full bg-[#0b1020] relative";const p=document.createElement("div");p.className="absolute left-2 top-2 bg-white/90 text-xs p-2 rounded border",p.textContent="Drag nodes • Scroll to zoom • Click a node for details",i.appendChild(p);const m=document.createElement("div");m.className="absolute right-2 top-2 bg-white/95 text-xs p-2 rounded border w-56 h-32 overflow-auto",m.textContent=s.description||"",i.appendChild(m);const P=L({title:s.title+" — Software Visualizer",body:i,width:820,height:560}),r=new R;r.background=new T(725024);const l=new y(60,1,.1,1e3);l.position.set(0,8,14);const c=new W({antialias:!0});c.setPixelRatio(devicePixelRatio),i.appendChild(c.domElement),new j(l,c.domElement),r.add(new F(16777215,.7));const g=new G(16777215,.5);g.position.set(5,10,7),r.add(g);const u=s.graph&&((D=s.graph.nodes)!=null&&D.length)?s.graph.nodes:[{id:"UI",label:"UI"},{id:"API",label:"API"},{id:"DB",label:"Database"},{id:"Worker",label:"Worker"},{id:"Auth",label:"Auth"}],b=s.graph&&((E=s.graph.edges)!=null&&E.length)?s.graph.edges:[["UI","API"],["API","DB"],["API","Worker"],["UI","Auth"],["Auth","DB"]],x=5;u.forEach((e,t)=>{const o=t/u.length*Math.PI*2;e.x=Math.cos(o)*x,e.y=0,e.z=Math.sin(o)*x});const d=[],v=[],k=new O(.5,24,24);u.forEach(e=>{const t=new U(k,new N({color:3381759}));t.position.set(e.x,e.y,e.z),t.userData=e,r.add(t),d.push(t);const o=z(e.label);o.position.set(e.x,e.y+.9,e.z),r.add(o),v.push(o)});const S=new V({color:16777215}),I=b.map(([e,t])=>{const o=d.find(n=>n.userData.id===e),a=d.find(n=>n.userData.id===t),f=new $().setFromPoints([o.position,a.position]),h=new q(f,S);return r.add(h),h});function z(e){const t=document.createElement("canvas"),o=t.getContext("2d");o.font="16px Tahoma";const a=o.measureText(e).width+10;t.width=a,t.height=22,o.font="16px Tahoma",o.fillStyle="white",o.strokeStyle="black",o.lineWidth=4,o.strokeText(e,5,16),o.fillText(e,5,16);const f=new H(t),h=new X({map:f,transparent:!0}),n=new Y(h);return n.scale.set(t.width/30,t.height/30,1),n}const C=new J,w=new K;function B(e){const t=c.domElement.getBoundingClientRect();w.x=(e.clientX-t.left)/t.width*2-1,w.y=-((e.clientY-t.top)/t.height)*2+1,C.setFromCamera(w,l);const o=C.intersectObjects(d)[0];if(o){const a=o.object.userData;m.innerHTML=`<div class="font-semibold mb-1">${a.label}</div><div>ID: ${a.id}</div>`}}c.domElement.addEventListener("click",B);function M(){const e=i.getBoundingClientRect();c.setSize(e.width,e.height),l.aspect=e.width/e.height,l.updateProjectionMatrix()}new ResizeObserver(M).observe(i),M();function A(){requestAnimationFrame(A),d.forEach((e,t)=>{e.position.y=Math.sin(performance.now()/1e3+t)*.1}),v.forEach((e,t)=>{e.position.y=.9+Math.sin(performance.now()/1e3+t)*.1}),I.forEach((e,t)=>{const[o,a]=b[t],f=d.find(n=>n.userData.id===o).position,h=d.find(n=>n.userData.id===a).position;e.geometry.setFromPoints([f,h])}),c.render(r,l)}return A(),P}export{ee as createSoftwareVisualizer};
